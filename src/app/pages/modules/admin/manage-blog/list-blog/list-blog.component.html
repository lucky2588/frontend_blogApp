<head>
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Roboto"
  />
  <link
    rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
  />
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/icon?family=Material+Icons"
  />
  <link
    rel="stylesheet"
    href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
  />
</head>

<div class="custom-main card card-custom gutter-b">
  <div class="custom-header card-header">
    <div class="card-title">
      <h6 class="card-label">Manage Blog</h6>
    </div>
    <div class="card-toolbar">
      <button (click)="create()" type="button" class="btn btn-primary custom-btn-add">
        Create +
        <div class="d-flex align-items-center justify-content-center">
          <mat-icon style="padding-top: 3px; margin-left: -8px"></mat-icon>
        </div>
      </button>
    </div>
  </div>
  
  <div class="card-body">
    <form [formGroup]="filterGroup">
      <div class="form form-label-right">
        <div class="form-group row">
          <div class="col-lg-12 input-group custom-search custom-search-main">
            <div class="input-group-prepend">
              <button type="button" class="btn btn-seccess custom-btn-search">
                <i class="fas fa-search custom-icon-search"></i>
              </button>
            </div>
            <input
              formControlName="search"
              type="text"
              class="form-control"
              placeholder="Nhập tiêu đề , nội dung"
              value=""
              name="searchText"
            />
          </div>
        </div>

        <div class="form-group row">
          <div class="col-lg-6">
            <div class="row">
              <div class="col-lg-6">
                <label> Filter By </label>
                <ng-select
                  placeholder="All"
                  formControlName="categories"
                  [multiple]="true"
                >
                  <ng-option
                    *ngFor="let item of categories"
                    [value]="item.id"
                    >{{ item.labelName }}</ng-option
                  >
                </ng-select>
              </div>
            </div>
          </div>
        </div>



      </div>
    </form>

    <!-- //table -->
    <div class="table-responsive angular-bootstrap-table table-design">
      <table class="table table-striped table-hover table-bordered  overflow-hidden table-nowrap">
        <thead>
          <tr>
            <th class="custom-th-frist"></th>
            <th  class="custom-th">Status
              <app-icon-sort column="active" [activeColumn]="DEFAULT_STATE.sorting.column"
              [activeDirection]="DEFAULT_STATE.sorting.direction" (sort)="sort($event)"></app-icon-sort>
            </th>
            <th class="custom-th">Title
              <app-icon-sort column="title" [activeColumn]="DEFAULT_STATE.sorting.column"
              [activeDirection]="DEFAULT_STATE.sorting.direction" (sort)="sort($event)"></app-icon-sort>
            </th>
            <th  class="custom-th">Content</th>
            <th  class="custom-th">Date
              <app-icon-sort column="created_date" [activeColumn]="DEFAULT_STATE.sorting.column"
              [activeDirection]="DEFAULT_STATE.sorting.direction" (sort)="sort($event)"></app-icon-sort>
            </th>
            <th class="truncate-text" >Categories
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngIf="(this.service.items$ | async)!.length < 1">
            <td class="text-center" colspan="12"> Not data  </td>
        </tr>
          <tr *ngFor="let items of this.service.items$ | async">
            <td class="selection-cell custom-th-frist">
              <div ngbDropdown class="d-inline-block" container="body">
                <button class="btn btn-light-primary" ngbDropdownToggle>
                  <i class="fa-solid fa-ellipsis-vertical"></i>
                </button>
                <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                  <button class="dropdown-item" (click)="view(items.id)">View Detail</button>
                  <span>
                    <button class="dropdown-item" (click)="update(items.id)"> Update </button>
                  </span>
                  <button class="dropdown-item" (click)="delete(items.id,items.title)"> Delete </button>
                </div>
              </div>
            </td>
            <td >
              <span placement="left">
                <app-label-status
                [status]="items.active"
                [message]="items.active">
              </app-label-status>
              </span>
            </td>
            <td >
              <span  [matTooltip]="items.title" placement="left">
                {{ items.title }}
              </span>

            </td>
            <td >
              <span  [matTooltip]="items.content" placement="left">
              {{ items.content  }}
              </span>
            </td>
            <td >
              <span  [matTooltip]="items.createdDate">
                {{ items.createdDate | date : "d/M/yyyy" }}
              </span>
              </td>
            <td class="left-align-column truncate-text">
              <span class=""  [matTooltip]="items.listCategory" >
                {{ items.listCategory  }}
              </span>
             </td>
          </tr>
        </tbody>
      </table>
      <app-paginator
      [paginator] = "(paginator | async)!"
      [isLoading]="false"
      (paginate)="paginate($event)"
      ></app-paginator>

    </div>
  </div>
</div>





